# 猫抓·小红书批量下载 🐱

[![GitHub release](https://img.shields.io/github/release/YOUR_USERNAME/cat-catch-xhs-download.svg)](https://github.com/YOUR_USERNAME/cat-catch-xhs-download/releases)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

基于猫抓资源嗅探技术，实现小红书按关键词批量下载视频的开源工具。

## ✨ 功能特色

### 关键词搜索下载
- 🎯 **智能搜索**: 按关键词搜索并自动下载小红书视频
- 🚀 **批量下载**: 支持一次性下载多个视频文件
- 💧 **无水印**: 自动获取并下载无水印原始视频
- 📁 **分类保存**: 按关键词自动创建文件夹分类保存

### 用户主页批量下载 🆕
- 👤 **用户定向**: 通过UID列表批量下载指定用户的所有内容
- 📂 **智能组织**: 按用户名自动创建文件夹分类保存
- 📊 **数量控制**: 自定义每个用户的下载笔记数量
- 📄 **文件导入**: 支持导入包含UID列表的文本文件

### 通用功能
- ⚡ **实时监控**: 自动捕获页面中的视频资源
- 🔄 **去重机制**: 避免重复下载相同视频
- 📊 **完整管理**: 双栏布局下载管理界面，实时统计和列表管理
- 🎨 **现代UI**: 小红书风格设计，直观易用的操作体验
- 📝 **标题显示**: 自动提取并显示视频标题，支持点击跳转
- 🔀 **选择重下**: 已跳过视频可选择重新下载

## 📖 使用说明

### 关键词搜索下载
1. 安装扩展后，浏览器工具栏会出现猫抓图标
2. 点击图标选择"搜索关键词下载"
3. 在左侧配置区输入关键词（如：美食、旅行、摄影等）
4. 选择下载数量和排序方式
5. 点击"开始下载"按钮，右侧日志实时显示进度

### 用户主页批量下载 🆕
1. 点击扩展图标选择"用户批量下载"
2. 输入用户UID列表（每行一个）或导入UID文件
3. 设置每个用户的下载数量（默认20个）
4. 点击"开始批量下载"，系统会：
   - 自动打开每个用户的主页
   - 收集该用户的笔记信息
   - 按用户名创建文件夹
   - 批量下载无水印视频

**UID获取方法**: 
用户主页URL的最后部分即为UID
- 例如：`https://www.xiaohongshu.com/user/profile/61c4a427000000001000d7c4`
- UID为：`61c4a427000000001000d7c4`

### 高级功能
- **自动分类**: 下载的视频会按关键词或用户名自动分类到不同文件夹
- **下载统计**: 实时显示已完成、已跳过、总计数量
- **列表管理**: 查看已下载和已跳过的视频列表
- **选择重下**: 勾选已跳过的视频进行重新下载
- **标题展示**: 显示视频真实标题，可点击跳转到原页面
- **清除记录**: 一键清除所有下载记录，允许重新下载

### 使用提示
- 首次使用建议先测试少量下载（1-3个）
- 确保有足够的磁盘空间存储视频文件
- 网络状况会影响下载速度和成功率
- 建议在网络稳定时使用

## 🔧 技术原理

本扩展基于以下技术实现：

1. **资源嗅探**: 使用 `webRequest` API 监听网络请求
2. **URL匹配**: 识别小红书视频资源链接模式
3. **自动下载**: 调用浏览器下载 API 执行下载
4. **内容脚本**: 在页面中注入脚本获取视频信息
5. **消息通信**: Background与Content Script间的消息传递
6. **持久化存储**: 使用 `chrome.storage` 记录已下载视频避免重复
7. **智能去重**: 基于笔记ID的精确去重机制

## 📝 更新日志

### v0.3.0 (2025-01-XX) 🆕

**🎯 重大功能更新 - 用户主页批量下载**
- ✨ 新增用户主页批量下载功能，支持通过UID列表批量下载指定用户的所有内容
- 📂 智能文件夹组织，按用户名自动创建文件夹分类保存下载内容
- 📊 自定义下载数量控制，可设置每个用户下载的笔记数量
- 📄 支持UID列表文件导入，方便批量操作大量用户
- 🎨 采用与搜索下载一致的双栏布局设计，界面统一美观

**🔧 技术改进**
- ⚡ 增强的消息重试机制，提升下载成功率
- 🐛 详细的调试日志和状态验证，便于问题排查
- 🧹 优化的标签页管理和资源清理，减少内存占用
- 🛡️ 改进的API调用和备用方案处理，提升稳定性
- 🔄 完整的下载记录管理，支持清除记录功能

**📱 用户体验优化**
- 📝 笔记标题显示而非ID，更直观的内容识别
- ✅ 已完成下载和已跳过视频的详细列表显示
- 🔀 支持选择跳过的视频重新下载
- 💬 专业的错误提示和重试逻辑

### v0.2.0 (2025-07-28)
- 🎨 全新双栏布局设计，UI大幅优化
- 📊 新增完整的下载管理功能
- 📝 支持显示视频真实标题
- 🔄 已跳过视频可选择重新下载
- ⚡ 优化下载逻辑，提升稳定性
- 🚫 移除按钮置灰，支持连续下载
- 📱 响应式布局，适配不同屏幕尺寸

### v0.1.3 (2025-07-24)
- 🐛 修复URL模式匹配错误
- ✨ 优化下载去重机制
- 🔧 改进错误处理和重试逻辑
- 📱 增强Service Worker稳定性

### v0.1.2 (2025-07-24)
- ✨ 新增自动下载功能
- 🛠️ 修复消息通道连接问题
- 📊 添加详细的下载进度显示

### v0.1.0 (2025-07-24)
- 🎉 首个版本发布
- 🎯 支持关键词搜索下载
- 💧 无水印视频获取

## ⚠️ 使用须知

1. **法律合规**: 请遵守相关法律法规，仅下载自己拥有版权或已获授权的内容
2. **个人使用**: 本工具仅供个人学习和研究使用
3. **尊重版权**: 请尊重原创作者的版权，不得用于商业用途
4. **网站政策**: 使用时请遵守小红书的用户协议和服务条款

## 🤝 贡献指南

欢迎提交Issue和Pull Request！

1. Fork 本项目
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 🔗 相关链接

- [小红书官网](https://www.xiaohongshu.com/)
- [问题反馈](https://github.com/YOUR_USERNAME/cat-catch-xhs-download/issues)

## 📞 联系方式

如果你有任何问题或建议，请通过以下方式联系：

- 📧 Email: your.email@example.com
- 💬 GitHub Issues: [提交问题](https://github.com/YOUR_USERNAME/cat-catch-xhs-download/issues)

---

⭐ 如果这个项目对你有帮助，请给它一个星标！ 

## 💖 致谢

本项目基于 [原版猫抓](https://github.com/xifangczy/cat-catch) 的资源嗅探技术进行开发，感谢 [@xifangczy](https://github.com/xifangczy) 及其团队的开源贡献。

原版猫抓是一个优秀的浏览器资源嗅探扩展，为广大开发者提供了强大的资源捕获功能。本项目在其基础上专注于小红书视频的批量下载功能。

- 原项目地址：https://github.com/xifangczy/cat-catch
- 原项目文档：https://cat-catch.bmmmd.com/ 
