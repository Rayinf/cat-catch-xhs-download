# 版本更新日志 v0.3.0

## 🎉 重大更新内容

### 新增功能
- ✨ **用户主页批量下载重构**：完全重写用户批量下载逻辑，与关键词下载保持一致的架构
- 🔄 **统一下载流程**：用户批量下载现在使用与关键词下载相同的单次指令+进度监听模式
- 📦 **优化文件夹管理**：支持自定义文件夹名称，默认按用户名分类保存

### 架构优化
- 🏗️ **代码重构**：user-batch.js 完全重写，移除复杂的多标签页管理和流捕获等待逻辑
- ⚡ **性能提升**：简化后台处理流程，减少不必要的等待时间
- 🎯 **逻辑统一**：前端只发送一次 xhs-download 指令，通过 progress 消息实时更新UI

### 用户体验改进
- 🎨 **界面一致性**：用户批量下载页面与关键词下载页面保持一致的操作体验
- 📊 **实时反馈**：优化进度显示和下载状态更新
- 🔧 **错误处理**：改进异常情况的处理和用户提示

### 技术细节
- 📝 **消息协议统一**：使用统一的 progress 消息格式
- 🔗 **API 整合**：background.js 新增 downloadByUidList 函数支持UID列表处理
- 🎛️ **状态管理**：简化前端状态管理，移除冗余的捕获视频跟踪

### Bug 修复
- 🐛 修复用户批量下载中重复记录显示的问题
- 🔧 修复下载进度统计不准确的问题
- ⚠️ 优化错误提示和异常处理机制

---

## 📋 更新说明

本次更新主要重构了用户批量下载功能，使其与关键词下载功能保持相同的架构和用户体验。这不仅提升了代码的可维护性，也为用户提供了更加统一和稳定的使用体验。

### 兼容性
- ✅ 保持与现有功能的完全兼容
- ✅ 支持所有小红书视频格式
- ✅ 维持无水印下载能力

### 使用方式
用户批量下载的使用方式保持不变：
1. 输入用户UID列表（支持完整链接或纯UID）
2. 设置下载数量和自定义文件夹名（可选）
3. 点击开始批量下载
4. 实时查看下载进度和已完成列表

---

*感谢使用猫抓·小红书批量下载工具！*